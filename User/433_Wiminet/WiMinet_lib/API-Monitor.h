// #############################################################################
// *****************************************************************************
//                  Copyright (c) 2007-2009, WiMi-net Corp.
//      THIS IS AN UNPUBLISHED WORK CONTAINING CONFIDENTIAL AND PROPRIETARY
//               INFORMATION WHICH IS THE PROPERTY OF WIMI-NET CORP.
//
//    ANY DISCLOSURE, USE, OR REPRODUCTION, WITHOUT WRITTEN AUTHORIZATION FROM
//                   WIMI-NET CORP., IS STRICTLY PROHIBITED.
// *****************************************************************************
// #############################################################################
//
// File:    api-monitor.h
// Author:  Mickle.ding
// Created: 11/23/2011
//
// Description:  Define the class api-monitor
// -----------------------------------------------------------------------------


// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
#ifndef _API_MONITOR_INC_

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
#define _API_MONITOR_INC_


// -----------------------------------------------------------------------------
// DESCRIPTION: 查询节点的工作模式
// -----------------------------------------------------------------------------
#define MONITOR_DEVICE_MODE                                    0X01

// -----------------------------------------------------------------------------
// DESCRIPTION: 查询全部网络节点的状态
// -----------------------------------------------------------------------------
#define MONITOR_STATUS_NODE                                    0X02


// -----------------------------------------------------------------------------
// DESCRIPTION: 查询节点的工作模式
// -----------------------------------------------------------------------------
#define MONITOR_DEVICE_MODE                                    0X01

// -----------------------------------------------------------------------------
// DESCRIPTION: 查询全部网络节点的状态
// -----------------------------------------------------------------------------
#define MONITOR_STATUS_NODE                                    0X02




// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
typedef struct _API_NETWORK_MONITOR_
{
   // --------------------------------------------------------------------------
   // DESCRIPTION: 网络节点的状态
   // --------------------------------------------------------------------------
   unsigned char                                               m_iStatus[0XFF];

   // --------------------------------------------------------------------------
   // DESCRIPTION: 本节点的工作状态
   // --------------------------------------------------------------------------
   unsigned char                                               m_iWiMode;

   // --------------------------------------------------------------------------
   // DESCRIPTION:  
   // --------------------------------------------------------------------------
   unsigned short                                              m_iRxNode;

   // --------------------------------------------------------------------------
   // DESCRIPTION: 网络参数更新参数掩码
   // --------------------------------------------------------------------------
   unsigned char                                               m_iUpdate;
   
} API_Network_Monitor;

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
void InitNetworkMornitor();

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
void SetMonitorNodeStatus( unsigned short iNode, unsigned char iStatus );

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
void UpdateNodeStatusTable( unsigned char * pBuffer, unsigned char iSize );

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
unsigned char GetMonitorNodeStatus( unsigned short iNode );

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
void SetMonitorRxNode( unsigned short iNode );

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
unsigned short GetMonitorRxNode();

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
void SetMonitorWiMode( unsigned char iWiMode );

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
unsigned char GetMonitorWiMode();

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
unsigned char GetMonitorUpdateMask();

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
unsigned char GetSuspendNodeTable( char * pBuffer, unsigned char iSize );

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
void SetMonitorUpdateMask( unsigned char iMask );

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
void ClearMonitorUpdateMask( unsigned char iMask );

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
void API_MonitorHandler();

// -----------------------------------------------------------------------------
// DESCRIPTION:
// -----------------------------------------------------------------------------
#endif